
```uml
@startuml
opt 未登録
ユーザー -> webサーバー:ユーザ登録
webサーバー -> dbサーバー:登録処理
dbサーバー -> dbサーバー:登録処理
dbサーバー -> webサーバー:登録結果
alt 処理成功
webサーバー -> ユーザー:登録画面表示
else 処理失敗
webサーバー -> ユーザー:エラーメッセージ表示
end
end

ユーザー -> webサーバー:ログイン
webサーバー -> dbサーバー:ログイン処理
dbサーバー -> dbサーバー:ログイン処理
dbサーバー -> webサーバー:ログイン結果
alt 処理成功
webサーバー -> ユーザー:ユーザー画面表示
else 処理失敗
webサーバー -> ユーザー:エラーメッセージ表示
end


ユーザー -> webサーバー:検索
webサーバー -> dbサーバー:検索処理
dbサーバー -> dbサーバー:検索処理
dbサーバー -> webサーバー:検索結果
alt 処理成功
webサーバー -> ユーザー:検索結果表示
else 処理失敗
webサーバー -> ユーザー:エラーメッセージ表示
end

ユーザー -> webサーバー:カート表示
webサーバー -> dbサーバー:カート処理
dbサーバー -> dbサーバー:カート処理
dbサーバー -> webサーバー:処理結果
alt 処理成功
webサーバー -> ユーザー:カート画面表示
else 処理失敗
webサーバー -> ユーザー:エラーメッセージ表示
end

ユーザー -> webサーバー:購入
webサーバー -> dbサーバー:購入処理
dbサーバー -> dbサーバー:購入処理
dbサーバー -> webサーバー:購入結果
alt 処理成功
webサーバー -> ユーザー:購入結果画面表示
else 処理失敗
webサーバー -> ユーザー:エラーメッセージ表示
end

@enduml
```
